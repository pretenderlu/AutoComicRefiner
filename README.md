# AutoComicRefiner

方便自己处理图片漫画的脚本。现已同时提供命令行与图形界面两种使用方式，便于在不同场景下快速批量整理漫画图像。

## 功能亮点

* 按高度、宽度或最大边界自动缩放图片，并在需要时保持原尺寸。
* 可选的双页切割功能，开启后可选择从左往右或从右往左输出拆分结果，并支持自定义命名模板。
* 镜像构建 `new/` 输出目录，支持缓存跳过已处理文件与多进程加速。
* 可将配置保存至 `config.ini`，实现跨会话复用。
* 全新现代化 GUI，提供所见即所得的参数配置与实时日志查看。

## 使用方法

### 1. 命令行模式

```bash
python run.py
```

按照提示输入漫画根目录并逐项设置参数，流程会自动记录日志至输入目录下的 `config.ini` 中指定文件。

### 2. 图形界面模式

```bash
python gui.py
```

GUI 提供以下特性：

* 通过“浏览…”按钮快速选择漫画根目录。
* 所有核心参数均以表单形式展示，支持即时保存配置。
* 调整模式下方会解释对应的缩放逻辑，辅助挑选合适方案。
* 双页切割可通过单个勾选启用，并在界面内选择左右顺序。
* 选定目录后提供高分辨率的原图预览，并可在缩略图栏或“上一张/下一张”按钮间快速切换查看所有图片，同时显示分辨率、色深、DPI 等信息。
* 运行日志实时输出在窗口底部，处理完成后会显示统计摘要。

> **提示**：GUI 与命令行共用同一份 `config.ini`，因此你可以在任一界面调整配置并在另一界面继续使用。

### 3. 打包成 Windows 可执行文件

若希望在未安装 Python 的机器上使用，可借助 [PyInstaller](https://pyinstaller.org/) 生成独立的 `.exe`：

1. 确保已安装依赖：
   ```powershell
   pip install pillow pyinstaller
   ```
2. 在项目根目录运行打包脚本：
   ```powershell
   python build_exe.py
   ```
   默认会生成单文件的 `dist/AutoComicRefiner.exe`，并隐藏伴随的命令行窗口，方便桌面端使用。
3. 如需使用 onedir 布局或自定义图标，可附加参数：
   ```powershell
   python build_exe.py --one-dir --icon path\to\icon.ico
   ```
   若希望保留命令行窗口以便查看调试输出，可增加 `--console` 参数。

打包脚本会自动把 `config.ini` 包含在内，首次运行时仍会在与可执行文件同级的目录写入/更新配置与日志。

## 环境要求

* Python 3.8 及以上版本。
* 必需依赖：`Pillow`。
* 建议依赖：`tqdm`（用于命令行进度条；若缺失程序会自动降级，不影响运行）。
* GUI 基于 Python 内置的 `tkinter`，大多数系统默认已包含；若缺失请自行安装相应组件。

## 许可证

本项目仅供个人学习与使用，如需扩展或二次分发请先联系作者。
